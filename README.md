# FastAPI Backend with Clean Architecture

## Описание
Backend приложение на FastAPI с чистой архитектурой, SQLite базой данных и JWT авторизацией.

## Структура проекта
```
backend/
├── app/
│   ├── domain/                 # Схемы данных (Pydantic модели)
│   ├── database/               # Конфигурация БД и модели
│   ├── internal/               # Внутренняя бизнес-логика
│   │   ├── auth/               # Сервис авторизации
│   │   └── users/              # Сервисы для работы с пользователями
│   ├── presentation/           # Презентационный слой (API)
│   │   └── api/v1/             # API роуты
│   ├── shared/                 # Общие компоненты
│   │   ├── dependencies/       # Зависимости FastAPI
│   │   └── exceptions/         # Кастомные исключения
│   └── main.py                 # Главный файл приложения
├── alembic/                    # Конфигурация миграций
├── requirements.txt            # Зависимости Python
├── .env                        # Переменные окружения
└── README.md                   # Данный файл
```

## Установка и запуск

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 2. Настройка базы данных
```bash
# Применение миграций
alembic upgrade head
```

### 3. Запуск приложения
```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

## API Endpoints

### Авторизация
- `POST /auth/login` - Вход в систему
- `POST /auth/logout` - Выход из системы  
- `GET /auth/me` - Информация о текущем пользователе

### Администрирование
- `POST /admin/users` - Создание пользователя (только для админов)
- `POST /admin/create-admin` - Создание администратора

## Пользователи по умолчанию
После первого запуска автоматически создается пользователь:
- Username: `admin`
- Password: `admin123`
- Role: `admin`

## Роли пользователей
- `admin` - Администратор (может создавать других пользователей)
- `annotator` - Аннотатор (обычный пользователь)

## Аутентификация
Сервис использует JWT токены, которые сохраняются в httpOnly cookie.
Токены действительны в течение 30 минут.

## Безопасность
- Пароли хешируются с использованием bcrypt
- JWT токены с коротким временем жизни
- Проверка активности пользователей
- Валидация входных данных с помощью Pydantic

## Дополнительно
- `GET /` - Проверка работоспособности API
- `GET /health` - Проверка состояния сервиса
